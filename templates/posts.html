{% extends '_base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/posts.css' %}">
{% endblock %}


{% block content %}
<h2>Publicaciones</h2>

<form method="post" enctype="multipart/form-data" action="{% url 'upload-post' %}">
    {% csrf_token %}
    <label for="image_upload">Imagen:</label>
    <input type="file" name="image_upload" id="image_upload" required>
    <br>
    <label for="caption">Descripción:</label>
    <textarea name="caption" id="caption" required></textarea>
    <br>
    <button type="submit">Publicar</button>
</form>
<hr>

{% for post in posts %}
    <div class="post">
        <p><strong>{{ post.user }}</strong></p>
        <img src="{{ post.image.url }}" alt="Imagen del post" style="max-width:300px;">
        <p>{{ post.caption }}</p>
        <p><small>{{ post.created_at }}</small></p>
        <hr>
    </div>
{% empty %}
    <p>No hay publicaciones aún.</p>
{% endfor %}
{% endblock %}